{"version":3,"sources":["splash.js","card.js","deck.js","index.js"],"names":["Splash","className","Component","Card","props","card","React","createRef","handleClick","bind","this","project","header","cardClass","size","focus","hasLink","link","ref","onClick","style","backgroundImage","img","tag","desc","href","projects","featured","year","Deck","state","isDesktop","current","indexOf","setState","id","map","proj","App","script","document","createElement","async","src","body","appendChild","target","rel","ReactDOM","render","getElementById","CARD_SIZES","calcSpacing","gal_width","visualViewport","height","card_size","card_spacing","Math","max","G_WIDTH","cName","width","gallery","x0","y0","row","row_height","row_width","area","children","element","push","substring","x","y","nx","ny","nsize","setProperty","floor","gal_height","yProp","getPropertyValue","initY","parseInt","length","cx","cy","buildGallery","window","addEventListener","onmousemove","e","card_focus","getElementsByClassName","clientX","clientY","box","getBoundingClientRect","calcX","calcY","sqrt","overlay"],"mappings":"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","file":"static/js/main.7db7ed06.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\n\r\nclass Splash extends Component {\r\n    render() {\r\n        return (\r\n            <div className=\"splash-container\">\r\n                <div className=\"splash-text-container\">\r\n                    <h1>Ian Dougherty's<br/>Portfolio</h1>\r\n                    <h2>here's a few things i've made</h2>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Splash;","import React, { Component } from \"react\";\r\n\r\nclass Card extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.card = React.createRef();\r\n        this.handleClick = this.handleClick.bind(this);\r\n    }\r\n\r\n    handleClick() {\r\n        this.props.handleClick(this.props.project.header);\r\n    }\r\n\r\n    render() {\r\n        let cardClass = this.props.project.size + \" card\";\r\n        const isFocus = this.props.focus != null;\r\n        cardClass += isFocus ? (this.props.focus == this.props.project.header ? \" focus\" : \" hidden\") : \" gallery\";\r\n\r\n        const hasLink = this.props.project.link != null;\r\n\r\n        return (\r\n            <div ref={ this.card } className={ cardClass }>\r\n                \r\n                <div className=\"card-body\" onClick={ this.handleClick } style={{backgroundImage: `url(${this.props.project.img})`}}>\r\n                    <div className=\"card-overlay\"></div>\r\n                    <h2 className=\"card-header text-header\">{  this.props.project.header  }</h2>\r\n                </div>\r\n\r\n                <div className=\"card-desc text-body scale-text-body\">\r\n                    <p><i>{ this.props.project.tag }</i></p>\r\n                    <p>{ this.props.project.desc }</p>\r\n                    <p className=\"card-link\">\r\n                        {hasLink\r\n                            ? <a href={ this.props.project.link }>- visit project -</a>\r\n                            : <span className=\"no-link\">- no link yet -</span>\r\n                        }\r\n                    </p>\r\n                </div>\r\n            \r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Card;","import React, { Component } from \"react\";\r\nimport Card from \"./card.js\";\r\n\r\nconst projects = [\r\n    {\r\n        size: \"lg\",\r\n        featured: true,\r\n        year: 2021,\r\n        img: \"assets/physics.png\",\r\n        header: \"Physics Engine\",\r\n        link: \"../physx\",\r\n        tag: \"A 2D rigidbody physics simulator.\",\r\n        desc:  `Create objects, apply forces, and simulate the environment. \r\n                Collisions are handled in two phases: a broad sweep and prune \r\n                for overlapping bounding boxes, and a narrow GJK check. Click \r\n                to view example scenes.`,\r\n    },\r\n    {\r\n        size: \"sm\",\r\n        featured: true,\r\n        year: 2020,\r\n        img: \"assets/cave3d.png\",\r\n        header: \"3D Cave\",\r\n        link: \"../3d/cave\",\r\n        tag: \"An explorable 3D cave.\",\r\n        desc:  `This mesh is procedurally generated from the cave generator, \r\n                and rendered with the 3D engine. Eventually, I would like to make \r\n                this into a procedural doom style game, but for now it can just be \r\n                explored from room to room.`,\r\n    },\r\n    {\r\n        size: \"sm\",\r\n        featured: false,\r\n        year: 2021,\r\n        img: \"assets/attractor.png\",\r\n        header: \"Strange Attactors\",\r\n        link: \"../strange%20attractors\",\r\n        tag: \"A simulation of several strange attractors.\",\r\n        desc:  `This was an experiment on how to apply quaternion \r\n                rotation and projection before adding it to the full 3D\r\n                engine. There are a few different attractors each \r\n                with particles that generate colorful trails.`,\r\n    },\r\n    {\r\n        size: \"md\",\r\n        featured: true,\r\n        year: 2021,\r\n        img: \"assets/raytracer.png\",\r\n        header: \"Ray Tracer\",\r\n        link: \"https://github.com/idougherty/ray-tracing-in-a-weekend\",\r\n        tag: \"A C# software ray tracing engine.\",\r\n        desc:  `A ray tracing project written in C# made by following the 'Ray\r\n                Tracing in One Weekend' book series. It implements multiple different\r\n                materials, has support for multithreading, and can simulate depth of field\r\n                effects.`,\r\n    },\r\n    {\r\n        size: \"md\",\r\n        featured: true,\r\n        year: 2020,\r\n        img: \"assets/3dteapot.png\",\r\n        header: \"3D Engine\",\r\n        link: \"../3d/\",\r\n        tag: \"A browser based 3D engine.\",\r\n        desc:  `This engine uses quaternion rotation \r\n                to represent the camera and the painter's \r\n                algorithm of drawing polygons. Polygons in \r\n                the mesh are sorted back to front in a binary \r\n                search tree and then pulled out for shading \r\n                in order.`,\r\n    },\r\n    {\r\n        size: \"sm\",\r\n        featured: true,\r\n        year: 2018,\r\n        img: \"assets/sqyrm.png\",\r\n        header: \"Sqyrm\",\r\n        link: \"../sqyrm/\",\r\n        tag: \"A collection of HTML5 canvas animations.\",\r\n        desc:  `I originally made these for fun while, but they\r\n                ended up inspiring some animations I made\r\n                for a Northwestern student film title & \r\n                credit sequence.`,\r\n    },\r\n    {\r\n        size: \"sm\",\r\n        featured: false,\r\n        year: 2021,\r\n        img: \"assets/cavegen.png\",\r\n        header: \"Cave Generator\",\r\n        link: \"../cavegen\",\r\n        tag: \"A procedural cave generator.\",\r\n        desc:  `Rooms are created with binary space partitioning\r\n                and connected by a minimum spanning tree. \r\n                Noise is then added and features are smoothed by\r\n                an iterative cellular automata.`,\r\n    },\r\n    {\r\n        size: \"lg\",\r\n        featured: true,\r\n        year: 2020,\r\n        img: \"assets/js-kart.png\",\r\n        header: \"js-kart\",\r\n        link: \"../js-kart\",\r\n        tag: \"A Node.js browser based racing game.\",\r\n        desc:  `Built up from the physics engine and track generator projects. \r\n                Utilizing a custom built multiplayer game framework using\r\n                websockets. Support for many common features such as client-side prediction so\r\n                inputs are responsive.`,\r\n    },\r\n    {\r\n        size: \"md\",\r\n        featured: false,\r\n        year: 2021,\r\n        img: \"assets/trackgen.png\",\r\n        header: \"Track Generator\",\r\n        link: \"../f1-minigames/trackgen\",\r\n        tag: \"A procedural racing track generator.\",\r\n        desc:  `Originally built for the f1 simulator project, and later \r\n                adapted for the js-kart project. Track splines are formed by\r\n                generating random points on a circle and distorting them\r\n                with perlin noise. A curve is then fitted to the spline and\r\n                a mesh is built.`,\r\n    },\r\n    // {\r\n    //     size: \"md\",\r\n    //     featured: false,\r\n    //     year: 2020,\r\n    //     img: \"assets/bjorn.png\",\r\n    //     header: \"Bjorn\",\r\n    //     link: \"../bjorn\",\r\n    //     tag: \"A spore type game set in a forest.\",\r\n    //     desc:  `Point and click to move, eat animals to grow, but watch \r\n    //             out for larger animals that can still damage you. Grow \r\n    //             large enough to defeat the bear. This was made from scratch in a week for a small game jam\r\n    //             with friends.`,\r\n    // },\r\n    // {\r\n    //     size: \"md\",\r\n    //     featured: false,\r\n    //     year: 2020,\r\n    //     img: \"assets/f1games.png\",\r\n    //     header: \"F1 Minigames\",\r\n    //     link: \"../f1-minigames/\",\r\n    //     tag: \"Minigames from the f1 racing project.\",\r\n    //     desc:  `These minigames were meant to be a part of \r\n    //             a weekly event that plays similar to Mario \r\n    //             Party. The more games you win, the faster\r\n    //             you go.`,\r\n    // },\r\n    {\r\n        size: \"md\",\r\n        featured: false,\r\n        year: 2016,\r\n        img: \"assets/basketball.png\",\r\n        header: \"NBA 3K\",\r\n        link: null,\r\n        tag: \"A Node.js 2-player basketball game.\",\r\n        desc:  `Shoot, steal, and dunk in a fast paced yet strategic \r\n                2D basketball match. Originally built to pass time in \r\n                class, but will be seeing major updates in the near\r\n                future. Permanent hosting coming soon!`,\r\n    },\r\n];\r\n\r\nclass Deck extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = { focus: null, isDesktop: null }; \r\n\r\n        this.ref = React.createRef();\r\n        this.handleClick = this.handleClick.bind(this);\r\n    }\r\n\r\n    handleClick(project) {\r\n        const isDesktop = this.ref.current.className.indexOf(\"mobile\") == -1;\r\n\r\n        if(project == this.state.focus) \r\n            project = null;\r\n\r\n        if(isDesktop && this.state.focus != null && project != null)\r\n            return;\r\n\r\n        this.setState({\r\n            focus: project,\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"card-deck\" id=\"gallery\" ref={ this.ref }>\r\n                {projects.map((proj) => (\r\n                    <Card focus={ this.state.focus } handleClick={ this.handleClick } key={ proj.header } project={ proj }/>\r\n                ))}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Deck;","import React, { Component } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport Splash from \"./splash.js\";\r\nimport Deck from \"./deck.js\";\r\nimport \"./splash.css\";\r\nimport \"./card.css\";\r\nimport \"./footer.css\";\r\nimport \"./style.css\";\r\n\r\nclass App extends Component {\r\n    componentDidMount() {\r\n        let script = document.createElement(\"script\");\r\n        script.async = true;\r\n        script.src = \"anim.js\";\r\n        document.body.appendChild(script);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"content-container\">\r\n                <canvas id=\"bg-anim\"/>\r\n                <Splash />\r\n                <h2 className=\"section-header\">Projects:<div className=\"header-underline\"></div></h2>\r\n                <Deck />\r\n                <div className=\"footer-wrapper\">\r\n                    <h2 className=\"section-header\">Contact Me:<div className=\"header-underline\"></div></h2>\r\n                    <p className=\"footer-content text-body scale-text-body\">\r\n                        Email: &emsp;&emsp;ianedougherty01@gmail.com<br/>\r\n                        Resume: &ensp;&nbsp;<a className=\"resume-link\" href=\"./ian's_resume.pdf\" target=\"_blank\" rel=\"noreferrer\">Click to download</a><br/>\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nReactDOM.render(<App />, document.getElementById('root'))\r\n\r\nconst CARD_SIZES = {\r\n    \"sm card\": 2,\r\n    \"md card\": 3,\r\n    \"lg card\": 4,\r\n}\r\n\r\n\r\nfunction calcSpacing() {\r\n    let G_WIDTH = 6;\r\n\r\n    let gal_width = visualViewport.height * .5;\r\n\r\n    let card_size = gal_width * .9 / G_WIDTH;\r\n    let card_spacing = gal_width * .1 / Math.max(G_WIDTH - 1, 1);\r\n    \r\n    let cName = visualViewport.width < 768 ? \"card-deck mobile\" : \"card-deck gallery\";\r\n\r\n    if(cName != gallery.className) {\r\n        gallery.className = cName;\r\n        buildGallery(G_WIDTH, card_size, card_spacing);\r\n\r\n        if(visualViewport.width < 768)\r\n            gallery.style.height = null;\r\n    }\r\n}\r\n\r\nlet gallery = document.getElementById(\"gallery\");\r\nwindow.addEventListener('resize', calcSpacing);\r\n\r\ncalcSpacing();\r\n\r\nfunction buildGallery(G_WIDTH, card_size, card_spacing) {\r\n\r\n    let x0 = 1;\r\n    let y0 = 1;\r\n    \r\n    let row = [];\r\n    let row_height = 0;\r\n    let row_width = 0;\r\n    let area = 0;\r\n\r\n    for(const element of gallery.children) {\r\n        row.push(element);\r\n        let size = CARD_SIZES[element.className.substring(0, 7)];\r\n\r\n        if(G_WIDTH == 1)\r\n            size = 1;\r\n\r\n        area += size * size;\r\n        row_width += size;\r\n        row_height = Math.max(size, row_height);\r\n    \r\n        //place elements\r\n        if(row_width >= G_WIDTH && G_WIDTH * row_height == area) {\r\n            let x = x0;\r\n            let y = y0;\r\n    \r\n            for(const card of row) {\r\n                let size = CARD_SIZES[card.className.substring(0, 7)];\r\n    \r\n                if(G_WIDTH == 1)\r\n                    size = 1;\r\n                    \r\n                const nx = (x - 1) * card_size + (x - 1) * card_spacing;\r\n                const ny = (y - 1) * card_size + (y - 1) * card_spacing;\r\n                const nsize = card_size * size + (size - 1) * card_spacing;\r\n    \r\n                card.style.setProperty('--left', Math.floor(nx) + 'px');\r\n                card.style.setProperty('--top', Math.floor(ny) + 'px');\r\n                card.style.setProperty('--width', Math.floor(nsize) + 'px');\r\n\r\n                y += size;\r\n    \r\n                if(y + size > y0 + row_height) {\r\n                    x += size;\r\n                    y = y0;\r\n                }\r\n            }\r\n    \r\n            x0 = 1;\r\n            y0 += row_height;\r\n    \r\n            row = [];\r\n            row_width = 0;\r\n            row_height = 0;\r\n            area = 0;\r\n        }\r\n    }\r\n\r\n    const gal_height = (y0 - 1) * card_size + (y0 - 2) * card_spacing;\r\n    const gal_width = G_WIDTH * card_size + (G_WIDTH - 1) * card_spacing;\r\n    gallery.style.height = gal_height + \"px\";\r\n    \r\n    for(const card of gallery.children) {\r\n        const yProp = card.style.getPropertyValue('--top');\r\n        const initY = parseInt(yProp.substring(0, yProp.length - 2));\r\n\r\n        const width = gal_width * 5 / 6;\r\n        const cx = gal_width/2 - width / 2;\r\n        const cy = initY * gal_height / (gal_height + width * 2);\r\n\r\n        card.style.setProperty('--centerX', Math.floor(cx) + 'px');\r\n        card.style.setProperty('--centerY', Math.floor(cy) + 'px');\r\n    }\r\n}\r\n\r\ndocument.onmousemove = (e) => {\r\n    if(gallery.className == \"card-deck mobile\")\r\n        return;\r\n\r\n    let card_focus = document.getElementsByClassName(\"focus\")[0];\r\n    \r\n    if(!card_focus)\r\n        return;\r\n\r\n    let focus = card_focus.children[0];\r\n\r\n    let x = e.clientX;\r\n    let y = e.clientY;\r\n    \r\n    let box = focus.getBoundingClientRect();\r\n\r\n    let calcX = (x - box.x - (box.width / 2)) / 20;\r\n    let calcY = -(y - box.y - (box.height / 2)) / 20;\r\n\r\n    let length = Math.sqrt(calcX * calcX + calcY * calcY);\r\n\r\n    if(length > 4) {\r\n        calcX = calcX / length * 4;\r\n        calcY = calcY / length * 4;\r\n    }\r\n\r\n    focus.style.setProperty('--xRot', `${calcY}deg`);\r\n    focus.style.setProperty('--yRot', `${calcX}deg`);\r\n\r\n    let overlay = focus.getElementsByClassName(\"card-overlay\")[0];\r\n    overlay.style.setProperty('--xShift', `${50 - 7*calcX}%`);\r\n    overlay.style.setProperty('--yShift', `${70 - 7*calcY}%`);\r\n};"],"sourceRoot":""}