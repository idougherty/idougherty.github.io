<!DOCTYPE html>
<html>
<head>
    <title>Spooky</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
</head>
<body>
    <div id="spooky"></div>
    
    <script>
        var spook = new Audio('screamingGoat.mp3');
        var bg_colour = Math.floor(Math.random() * 16777215).toString(16);
        bg_colour = "#" + ("000000" + bg_colour).slice(-6);
        document.bgColor = bg_colour;
        
        function seizure() {
            setInterval(function() {
                bg_colour = Math.floor(Math.random() * 16777215).toString(16);
                bg_colour = "#" + ("000000" + bg_colour).slice(-6);
                document.bgColor = bg_colour;
            }, 1);
        }
        
        function getRandomColor() {
            var letters = '0123456789ABCDEF'.split('');
            var color = '#';
            for (var i = 0; i < 6; i++ ) {
                color += letters[Math.floor(Math.random() * 16)];
            }
            return color;
        }
        
        function getSpooked() {
            seizure();
            spook.play();
            $("#spooky").append("<p style='position: absolute; top: "+Math.random()*90+"%; left: "+Math.random()*90+"%; -webkit-transform: rotate("+Math.random() * 180+"deg); color: "+getRandomColor()+"; font-size: "+(Math.random()*10 + 10)+"px;'>get spooked on.</p>");
        }
        
        function checkForSpooks() {
            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function() {
                if (xhttp.readyState == 4 && xhttp.status == 200) {
                    myFunction(xhttp);
                }
            };
            xhttp.open("GET", "spook.xml", true);
            xhttp.send();
            
            function myFunction(xml) {
                var xmlDoc = xml.responseXML;
                var x = xmlDoc.getElementsByTagName('spook');
                var activated = x[0].getAttribute("activated");
                
                if(activated === "true") {
                    getSpooked();
                }
            }
        }
        
        //add when button on controller pressed spooks activate
    </script>
</body>
</html>